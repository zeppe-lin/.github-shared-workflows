on:
  workflow_call:
    inputs:
      irc_user:
        type: string
        required: true
      irc_pass:
        type: secret
        required: true
      channel:
        type: string
        required: true

jobs:
  send:
    runs-on: ubuntu-latest

    steps:
      - name: Send message
        uses: Gottox/irc-message-action@v2
        if: github.event_name == 'push'
        with:
          channel: ${{ inputs.channel }}
          nickname: ${{ inputs.irc_user }}
          sasl_password: ${{ inputs.irc_pass }}
          message: |-
            ${{ github.actor }} pushed ${{ github.event.repository.name }}:${{ github.ref_name || github.event.ref }} -- ${{ github.event.compare }}
            ${{ join(github.event.commits.*.message, '
            ') }}

# End of file.
